---
title: "Reducing Commercial Aviation Fatalities with Machine Learning"
output: html_notebook
---


In this notebook, we are going to create an algorithm which will detect troubling events from aircrew???s physiological data. This algorithm will learn from train dataset and then it will predict the placement for each player of the test dataset.

The plan to do that is the following one :

1. Exploration of data
2. Cleaning data and Features engineering
3. Testing of the model on train dataset
4. Prediction on test data & submission on kaggle

For more informations or for seeing data, please check the competition page : https://www.kaggle.com/c/reducing-commercial-aviation-fatalities

### Imports

```{r}
library(data.table)
library(ggplot2)
library(tidyr)
```


### Useful functions

```{r}

```

### 1. Exploration of data

First, we can take a look on the first 5 lines of the train data.frame after importing it from csv file:
```{r}
path_train <- getwd()
path_train = paste(path_train, 'datasets/train.csv', sep='/')
train_raw <- fread(file=path_train, header=TRUE, sep=",")
head(train_raw, 5)
```

**Let's put here all informations about columns of this dataframe:**

- id = (test.csv and sample_submission.csv only) A unique identifier for a crew + time combination. You must predict probabilities for each id.
- crew = a unique id for a pair of pilots. There are 9 crews in the data.
- experiment = One of CA, DA, SS or LOFT. The first 3 comprise the training set. The latter the test set.
- time = seconds into the experiment
- seat = is the pilot in the left (0) or right (1) seat
- eeg_* = electroencephalogram
- ecg = 3-point Electrocardiogram signal. The sensor had a resolution/bit of .012215 ??V and a range of -100mV to +100mV. The data are provided in microvolts.
- r = Respiration, a measure of the rise and fall of the chest. The sensor had a resolution/bit of .2384186 ??V and a range of -2.0V to +2.0V. The data are provided in microvolts.
- gsr = Galvanic Skin Response, a measure of electrodermal activity. The sensor had a resolution/bit of .2384186 ??V and a range of -2.0V to +2.0V. The data are provided in microvolts.
- event (to be predicted with probabilities) = The state of the pilot at the given time: one of A = baseline, B = SS, C = CA, D = DA

**And the three types of events:**

- Channelized Attention (CA) is, roughly speaking, the state of being focused on one task to the exclusion of all others. This is induced in benchmarking by having the subjects play an engaging puzzle-based video game.
- Diverted Attention (DA) is the state of having one???s attention diverted by actions or thought processes associated with a decision. This is induced by having the subjects perform a display monitoring task. Periodically, a math problem showed up which had to be solved before returning to the monitoring task.
- Startle/Surprise (SS) is induced by having the subjects watch movie clips with jump scares.

```{r}
sapply(train_raw, function(x) sum(is.na(x)))
```

Apparently, there are no missing values in this data.frame ! 
Now, let's compute some basical statistics on this data.frame:

```{r}
summary(train_raw)
```
We will have to work on 'experiment' and 'event' columns to make it numerical. Other columns are numerical.

Let's make some plot to try to see pattern in the data :

```{r}
boxplot(split(train_raw$r, train_raw$event), main='Event by respiration')
```
It seem that B event is correlated with an higher respiration rate ... It's normal knowing that B event corresponds to SS (Startle/Surprise) and is induced by having the subjects watch movie clips with jump scares. We may help the algorithm to find this patter by creating a binary "high respiration column" which value is 1 for respirations over 750 and 0 for others values of respirations.

```{r}

```


### 2. Cleaning data and Features engineering
### 3. Testing of the model on train dataset
### 4. Prediction on test data & submission on kaggle